Error(`Stripe: Argument "${N}" must be a string, but got: ${Q} (on API request to \`${i} ${l}\`)`);return k[N]=Q,k},{}),m=Zi(p),h=o(Object.assign({},m,r)),v=Ju(p),y=v.host||e.host,w=!!e.streaming||!!v.streaming;if(p.filter(k=>k!=null).length)throw new Error(`Stripe: Unknown arguments (${p}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${i} \`${l}\`)`);let T=u?c(d):this.createFullPath(c,d),_=Object.assign(v.headers,e.headers);e.validator&&e.validator(h,{headers:_});let P=e.method==="GET"||e.method==="DELETE";return{requestMethod:i,requestPath:T,bodyData:P?null:h,queryData:P?h:{},authenticator:(n=v.authenticator)!==null&&n!==void 0?n:null,headers:_,host:y??null,streaming:w,settings:v.settings,usage:s}},_makeRequest(t,e,r){return new Promise((n,i)=>{var s;let a;try{a=this._getRequestOpts(t,e,r)}catch(d){i(d);return}function o(d,m){d?i(d):n(e.transformResponseData?e.transformResponseData(m):m)}let u=Object.keys(a.queryData).length===0,c=[a.requestPath,u?"":"?",Ur(a.queryData,Ji(a.requestPath))].join(""),{headers:l,settings:p}=a;this._stripe._requestSender._request(a.requestMethod,a.host,c,a.bodyData,a.authenticator,{headers:l,settings:p,streaming:a.streaming},a.usage,o,(s=this.requestDataProcessor)===null||s===void 0?void 0:s.bind(this))})}};var oo=class t{constructor(e=[]){this._segments=[...e]}get segments(){return[...this._segments]}push(e){if(!e)throw new Error("Segment cannot be null or undefined");return new t([...this._segments,e])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new t(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(e){return e?new t(e.split("/")):new t([])}};function dE(t){let e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(l,p,d,m,h,v){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(l,p,d,m||e.DEFAULT_TOLERANCE,h,v)}catch(w){throw w instanceof Wi&&(w.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)